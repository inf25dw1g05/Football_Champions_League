openapi: 3.0.0
info:
  title: Champions League
  version: 0.0.1
  description: 'Torneio da Champions League'
  contact:
    name: inf25dw1g05
    email: inf25dw1g05@gmail.com

servers:
- url: http://localhost:8080/{basePath}
  description: Champions League
  variables:
    basePath:
      default: /Groups
components:
  schemas:
    Team:
      title: Team
      type: object
      properties:
        team_id:
          type: integer
          format: int64
        name:
          type: string
        country:
          type: string
        coach:
          type: string
        group:
          type: string
      required:
      - name
      - country
      - coach
      - group
      additionalProperties: false

    Player:
      title: Player
      type: object
      properties:
        player_id:
          type: integer
          format: int64
        name:
          type: string
        position:
          type: string
        nationality:
          type: string
        team_id:
          type: integer
          format: int64
        shirt_number:
          type: integer
          description: Número da camisola do jogador
          minimum: 1
          maximum: 99
      required:
      - name
      - position
      - nationality
      - team_id
      - shirt_number
      additionalProperties: false

    Match:
      title: Match
      type: object
      properties:
        match_id:
          type: integer
          format: int64
        home_team_id:
          type: integer
          format: int64
        away_team_id:
          type: integer
          format: int64
        match_date:
          type: string
          format: date
        venue:
          type: string
        home_score:
          type: integer
          default: 0
          minimum: 0
        away_score:
          type: integer
          default: 0
          minimum: 0
      required:
      - home_team_id
      - away_team_id
      additionalProperties: false

    MatchEvent:
      title: MatchEvent
      type: object
      properties:
        event_id:
          type: integer
          format: int64
        match_id:
          type: integer
          format: int64
        player_id:
          type: integer
          format: int64
        event_type:
          type: string
          enum: [ 'Goal', 'Yellow Card', 'Red Card', 'Assist' ]
        minute:
          type: integer
          minimum: 1
          maximum: 90
      required:
      - match_id
      - player_id
      - event_type
      - minute
      additionalProperties: false

  examples:
    TeamExample01:
      value:
        team_id: 1
        name: "Porto"
        country: "Portugal"
        coach: "Frascesco Farioli"
        group: "A"
    TeamExample02:
      value:
        team_id: 2
        name: "Liverpool"
        country: "England"
        coach: "Arne Slot"
        group: "A"
    PlayerExample01:
      value:
        player_id: 1
        name: "Victor Froholdt"
        position: "Central Midfield"
        nationality: "Danish"
        shirt_number: 8
        team_id: 1
    MatchExample01:
      value:
        match_id: 1
        home_team_id: 1
        away_team_id: 2
        match_date: "2025-11-15"
        venue: "Estádio do Dragão"
        home_score: 1
        away_score: 0
    MatchEventExample01:
      value:
        event_id: 1
        match_id: 1
        player_id: 1
        event_type: "Goal"
        minute: 29
paths:
  '/teams':
    get:
      tags:
      - TeamsController
      operationId: retrieveTeams
      summary: Ver equipas
      description: Ver todas as equipas, sendo possível filtrar!
      parameters:
      - name: country
        in: query
        description: Filtrar por país da equipa
        required: false
        schema:
          type: string
        example: "Portugal"
      - name: group
        in: query
        description: Filtrar por grupo da equipa
        required: false
        schema:
          type: string
        example: "A"
      - name: coach
        in: query
        description: Filtrar por nome do treinador
        required: false
        schema:
          type: string
        example: "Ancelotti"
      responses:
        '200':
          description: Array of Teams model instances
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Team'
                xml:
                  name: Teams
    post:
      tags:
      - TeamsController
      operationId: createTeam
      summary: Criar equipa
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Team'
      responses:
        '200':
          description: Create a Team model instance
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Team'

  '/teams/{id}':
    get:
      tags:
      - TeamsController
      operationId: retrieveTeam
      summary: Ver equipa em específico
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
          format: int64
          minimum: 1
        examples:
          one:
            value: 1
            summary: Retrieve Team id 1
          two:
            value: 2
            summary: Retrieve Team id 2
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Team'
        '400':
          description: Bad request
        '404':
          description: id not found
    put:
      tags:
      - TeamsController
      operationId: updateTeam
      summary: Atualizar Equipa
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                description: Team PUT Success
        '400':
          description: Bad request
        '404':
          description: id not found
      parameters:
      - name: id
        in: path
        schema:
          type: integer
          format: int64
          minimum: 1
        required: true
        examples:
          one:
            value: 1
            summary: Update Team id 1
          two:
            value: 2
            summary: Update Team id 2
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Team'
            examples:
              AeoportoExample01:
                $ref: '#/components/examples/TeamExample01'
              AeoportoExample02:
                $ref: '#/components/examples/TeamExample02'
    delete:
      tags:
      - TeamsController
      operationId: deleteTeam
      summary: Apagar Equipa
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
          format: int64
          minimum: 1
        examples:
          one:
            value: 1
            summary: Delete Team id 1
          two:
            value: 2
            summary: Delete Team id 2
      responses:
        '204':
          description: No content
        '404':
          description: id not found

  '/teams/{id}/matches':
    parameters:
    - name: id
      in: path
      description: ID da equipa da qual obter os jogos
      required: true
      schema:
        type: integer
        format: int64
    get:
      tags:
      - TeamsController
      summary: Listar jogos de uma equipa
      description: Obter todos os jogos (passados e futuros) de uma equipa específica.
      operationId: getMatchesByTeam
      responses:
        '200':
          description: Lista de jogos da equipa
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Match'
        '404':
          description: Equipa não encontrada

  '/teams/{id}/players':
    parameters:
    - name: id
      in: path
      description: ID da equipa da qual obter os jogadores
      required: true
      schema:
        type: integer
        format: int64
    get:
      tags:
      - TeamsController
      summary: Listar jogadores de uma equipa
      description: Obter todos os jogadores de uma equipa específica.
      operationId: getPlayersByTeam
      responses:
        '200':
          description: Lista de jogadores da equipa
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Player'
        '404':
          description: Equipa não encontrada

  '/players':
    get:
      tags:
      - PlayersController
      operationId: retrievePlayers
      summary: Ver Jogadores
      description: Ver todos os jogadores , sendo possível filtrar!
      parameters:
      - name: position
        in: query
        schema:
          type: string
        required: false
      - name: nationality
        in: query
        schema:
          type: string
        required: false
      - name: team_id
        in: query
        schema:
          type: integer
          format: int64
        required: false
      responses:
        '200':
          description: Lista de jogadores
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Player'
    post:
      tags:
      - PlayersController
      operationId: createPlayer
      summary: Criar Jogador
      description: Criar um novo jogador.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Player'
      responses:
        '200':
          description: Jogador criado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Player'

  '/players/{id}':
    get:
      tags:
      - PlayersController
      operationId: retrievePlayer
      summary: Ver jogador em específico
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
          format: int64
      responses:
        '200':
          description: Jogador encontrado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Player'
        '404':
          description: Jogador não encontrado

    put:
      tags:
      - PlayersController
      operationId: updatePlayer
      summary: Atualizar Jogador
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
          format: int64
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Player'
      responses:
        '200':
          description: Jogador Atualizado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Player'
        '404':
          description: Jogador não encontrado

    delete:
      tags:
      - PlayersController
      operationId: deletePlayer
      summary: Apagar Jogador
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
          format: int64
      responses:
        '204':
          description: No content
        '404':
          description: Jogador não encontrado

  '/players/{id}/events':
    get:
      tags:
      - PlayersController
      operationId: getEventsByPlayer
      summary: Listar Eventos de um jogador específico
      parameters:
      - name: id
        in: path
        required: true
        description: ID do jogador
        schema:
          type: integer
          format: int64
      - name: type
        in: query
        required: false
        schema:
          type: string
          enum: [ Goal, Yellow Card, Red Card, Assist ]
      - name: match_id
        in: query
        required: false
        schema:
          type: integer
          format: int64
      responses:
        '200':
          description: Lista de eventos/acontecimentos do jogador
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/MatchEvent'
        '404':
          description: Jogador não encontrado
